---
title: "RISE ETF 데이터 시각화"
description: "Amcharts 활용 5종 이상의 데이터 시각화 차트 설계 및 구현. WCAG 2.1 준수 웹 접근성 인증 마크를 획득했습니다."
tags: ["JavaScript", "Amcharts4", "SCSS", "WAI-ARIA"]
year: 2021
links:
  live: "https://www.riseetf.co.kr/"
---

## 프로젝트 개요

RISE ETF 서비스의 데이터 시각화 차트 개발 및 웹 접근성 인증 마크 획득 프로젝트에서 UI 스크립트를 매니저로서 담당했습니다.

## 주요 성과

- **Amcharts4 활용 5종 이상의 데이터 시각화 차트 설계 및 구현** (WorldMap, Word Cloud, TreeMap 등)
- **WCAG 2.1 가이드라인 준수 포커스 트랩 해결**, 키보드 네비게이션 및 스크린 리더 호환성 확보, 웹와치 접근성 인증 마크 획득
- **TreeMap 차트 도입**으로 복잡한 ETF 포트폴리오를 계층적으로 시각화, 정보 전달력 강화
- **레거시 차트 디버깅**: 수익률/기준률 차트 오류 분석 및 수정으로 데이터 정합성 확보

## 기술적 도전

가장 큰 과제는 인터랙티브 차트와 웹 접근성을 양립시키는 것이었습니다. 데이터 시각화 차트는 본질적으로 시각 정보에 의존하며, Amcharts4가 생성하는 SVG 요소들은 기본적으로 스크린 리더가 해석할 수 없는 구조입니다. 차트의 데이터를 시각 장애 사용자에게도 전달하면서, 키보드만으로 차트 내부를 탐색할 수 있는 인터페이스를 구현해야 했습니다.

Amcharts4의 SVG 렌더링은 Canvas와 달리 DOM 요소로 접근 가능하지만, 차트가 렌더링하는 수백 개의 SVG 경로(path)에 개별적으로 ARIA 속성을 부여하는 것은 오히려 스크린 리더 사용자에게 정보 과부하를 일으킵니다. 차트 전체를 `role="img"`로 처리하고 `aria-label`에 요약 정보를 제공하되, 상세 데이터는 별도의 숨겨진 데이터 테이블(`sr-only`)로 제공하는 이중 구조를 설계했습니다.

포커스 트랩 문제도 난이도가 높았습니다. Amcharts4는 차트 내부에 자체적인 포커스 관리 로직이 있어, Tab 키로 차트 영역에 진입하면 내부 SVG 요소들 사이에서 포커스가 순환하며 빠져나올 수 없는 트랩이 발생했습니다. 차트 라이브러리의 키보드 이벤트 핸들러와 충돌하지 않으면서 Escape 키로 차트를 탈출할 수 있는 포커스 관리 로직을 구현해야 했습니다.

WorldMap 차트에서는 지역별 ETF 투자 비중을 시각화하는데, 지리 데이터(GeoJSON)의 용량이 크고 렌더링 비용이 높아 초기 로딩 시간이 문제였습니다. 필요한 지역 데이터만 추출한 경량 GeoJSON을 사용하고, 차트 초기화를 뷰포트 진입 시점으로 지연하여 체감 로딩 속도를 개선했습니다.

레거시 수익률/기준률 차트의 디버깅에서는 날짜 축(DateAxis)의 데이터 파싱 오류가 원인이었습니다. 백엔드에서 전달하는 날짜 형식과 Amcharts4의 기본 파싱 규칙 사이의 불일치가 특정 날짜 범위에서만 발생하는 간헐적 오류를 일으키고 있었고, 날짜 포맷을 명시적으로 지정하여 해결했습니다.

## 기술적 의사결정 및 근거

### 데이터 시각화 라이브러리: Amcharts4 vs D3.js

**Amcharts4 채택.** 프로젝트에서 필요한 차트 유형이 WorldMap, Word Cloud, TreeMap, Line, Bar 등 5종 이상이었습니다. D3.js로 이 모든 차트를 구현하려면 각 차트의 레이아웃 알고리즘, 축 계산, 툴팁, 범례, 애니메이션을 개별적으로 작성해야 하며, 2개월이라는 짧은 일정에서 현실적이지 않았습니다. Amcharts4는 WorldMap, TreeMap, Word Cloud 등을 내장 모듈로 제공하여 D3.js 대비 1/3 이하의 코드량으로 구현할 수 있었습니다. 상용 라이센스 비용과 큰 번들 사이즈(약 1MB), 커스터마이징 자유도의 한계, 차트 내부 SVG 접근이 어려워 접근성 구현에 우회가 필요한 점은 트레이드오프였습니다.

### ETF 포트폴리오 시각화: TreeMap vs Pie Chart vs Stacked Bar

**TreeMap 채택.** ETF 포트폴리오 데이터의 특성이 결정의 근거였습니다. 하나의 ETF 상품이 여러 섹터에 분산 투자되고 각 섹터 내에 개별 종목이 포함되는 2~3단계 계층 구조를 갖는데, Pie Chart는 단일 레벨 비율만 표현할 수 있어 계층 정보가 소실되고 항목이 20개를 넘으면 구분이 어렵습니다. Stacked Bar는 계층적 포함 관계를 직관적으로 표현하기 어렵습니다. TreeMap은 면적 비례로 계층 구조를 자연스럽게 표현하며, 드릴다운 인터랙션도 지원합니다. 사용자 친숙도가 낮은 트레이드오프는 각 영역에 비율 수치를 표시하고 호버 시 상세 툴팁을 제공하여 보완했습니다.

### 인터랙티브 차트의 접근성: 이중 구조 설계

인터랙티브 차트와 웹 접근성을 양립시키는 것이 핵심 과제였습니다. SVG 요소에 개별 ARIA 속성을 부여하는 방식은 이론적으로 이상적이지만, 200개 이상의 데이터 포인트를 가진 Line Chart에서 스크린 리더가 모든 포인트를 순차적으로 읽어주면 실질적으로 사용 불가능한 경험이 됩니다.

이를 해결하기 위해 차트 + 숨겨진 데이터 테이블의 이중 구조를 설계했습니다. 차트 컨테이너에 `role="img"`와 요약 `aria-label`을 제공하고, 상세 데이터는 시각적으로 숨겨진(`sr-only`) 테이블로 제공하여 스크린 리더에서 완전한 데이터 탐색이 가능하도록 했습니다. 차트 데이터 업데이트 시 테이블도 동기적으로 갱신해야 하는 이중 관리 부담이 있었지만, 차트 렌더링 함수에서 동일 데이터로 테이블 DOM을 함께 생성하는 유틸리티를 작성하여 불일치 위험을 최소화했습니다. `aria-live="polite"` 영역으로 차트 필터 변경 시 요약 정보를 스크린 리더에 자동 전달하는 기능도 추가했습니다.

## 담당 기간

2021.10 - 2021.12 | UI 스크립트 매니저
